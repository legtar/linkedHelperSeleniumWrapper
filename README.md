# linkedHelperSeleniumWrapper# Linked Helper Automator

Этот скрипт автоматизирует процесс добавления профилей LinkedIn в кампанию Linked Helper, их тегирования, запуска кампании и скачивания результатов.

## Возможности

* Автоматический вход в Linked Helper.
* Запуск инстанса Linked Helper.
* Навигация к указанной кампании (`hr emails` по умолчанию).
* Чтение URL профилей LinkedIn из CSV файла (`profile_urls_ДД_ММ_ГГГГ.csv`).
* Добавление профилей в кампанию батчами (порциями) с сохранением прогресса.
* Автоматическое возобновление добавления батчей с последнего успешного места при перезапуске.
* Тегирование всех новых добавленных профилей в очереди ('New') текущей датой (в формате "ДД ММ ГГГГ2").
* Запуск кампании для обработки профилей.
* Динамическое ожидание завершения обработки на основе количества профилей.
* Фильтрация успешно обработанных профилей ('Successful') по добавленному тегу.
* Скачивание отфильтрованных профилей в CSV файл в текущую директорию.
* Логика перезапуска скрипта при возникновении ошибок (до `MAX_SCRIPT_RETRIES` раз).
* Отправка уведомлений о статусе (успех/ошибка) в Telegram.
* Структурированный код с использованием класса и логированием.

## Пререквизиты

1.  **Python 3.7+**
2.  **Google Chrome** установленный в системе.
3.  **ChromeDriver**, совместимый с вашей версией Google Chrome.
    * Либо поместите `chromedriver.exe` (или `chromedriver` для Linux/Mac) в директорию со скриптом.
    * Либо убедитесь, что путь к ChromeDriver добавлен в системную переменную `PATH`.
    * Либо укажите абсолютный путь в константе `CHROMEDRIVER_PATH` в скрипте `main.py`.
4.  **Python библиотеки:** Установите их с помощью pip:
    ```bash
    pip install -r requirements.txt
    ```

## Конфигурация

1.  **Учетные данные и токены (Обязательно!)**:
    * **Настоятельно рекомендуется** не хранить учетные данные и токены прямо в коде. Используйте переменные окружения:
        * `LH_EMAIL`: Ваш email для входа в Linked Helper.
        * `LH_PASSWORD`: Ваш пароль для Linked Helper.
        * `TG_BOT_TOKEN`: Токен вашего Telegram бота.
        * `TG_CHAT_ID`: ID вашего Telegram чата для уведомлений.
    * Как альтернативу (менее безопасно), вы можете задать значения прямо в файле `main.py` для констант: `LINKEDHELPER_EMAIL`, `LINKEDHELPER_PASSWORD`, `BOT_TOKEN`, `CHAT_ID`. **Не добавляйте файл с реальными данными в Git!**

2.  **Входной файл**:
    * Создайте CSV файл с именем `profile_urls_ДД_ММ_ГГГГ.csv` (например, `profile_urls_28_03_2025.csv`) в той же директории, что и `main.py`.
    * Каждая строка файла должна содержать один URL профиля LinkedIn. Убедитесь, что файл в кодировке UTF-8. См. `profile_urls_example.csv`.

3.  **Прочие настройки (Опционально)**:
    * Вы можете изменить другие параметры в разделе `--- КОНФИГУРАЦИЯ ---` файла `main.py`, такие как `BATCH_SIZE`, таймауты, количество попыток (`MAX_SCRIPT_RETRIES`, `MAX_BATCH_ADD_RETRIES`) и т.д.

## Использование

1.  Убедитесь, что выполнены все пререквизиты и конфигурация.
2.  Запустите скрипт из командной строки:
    ```bash
    python main.py
    ```
3.  Скрипт начнет выполнение, логируя свои действия в консоль.
4.  Уведомления о старте, ошибках и завершении будут отправляться в указанный Telegram чат.
5.  В случае успешного выполнения и наличия обработанных профилей, CSV файл с результатами будет скачан в ту же директорию, где запущен скрипт. Имя файла будет примерно таким: `Profiles downloaded from lh-instance-name at ГГГГ-ММ-ДД T ЧЧ-ММ-СС.csv`.

## Файлы, создаваемые скриптом

* `processed_batches.log`: Хранит индекс последнего успешно добавленного батча для возобновления. **Не удаляйте его**, если хотите, чтобы скрипт продолжил с места остановки.
* `*.csv` (например, `Profiles downloaded from... .csv`): Файл с результатами, скачанный из Linked Helper.
* Логи выводятся в стандартный вывод (консоль).

## Важные замечания и предупреждения

* **Стабильность XPath:** Скрипт сильно зависит от XPath селекторов для поиска элементов на сайте Linked Helper. Эти селекторы могут измениться при обновлении интерфейса сайта, что приведет к ошибкам в работе скрипта. Может потребоваться обновление XPath в словаре `XPATHS` в `main.py`.
* **Условия использования Linked Helper:** Убедитесь, что использование средств автоматизации не нарушает условия использования Linked Helper и LinkedIn. Используйте скрипт на свой страх и риск.
* **Безопасность:** Не храните учетные данные и токены в открытом виде в коде, особенно если вы планируете делиться им или выкладывать в публичный репозиторий. Используйте переменные окружения.
* **Тег:** Формат тега (`"ДД ММ ГГГГ2"`) взят из оригинального скрипта. Убедитесь, что суффикс "2" действительно нужен.